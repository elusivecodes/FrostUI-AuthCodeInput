!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(t)}(window,(function(t){"use strict";if(!t)throw new Error("FrostUI-AuthCodeInput requires a Window.");if(!("UI"in t))throw new Error("FrostUI-AuthCodeInput requires FrostUI.");const e=t.dom,s=t.UI;class i extends s.BaseComponent{constructor(t,s){super(t,s),e.hasAttribute(this._node,"maxlength")&&(this._settings.length=e.getAttribute(this._node,"maxlength")),this._settings.length=Core.wrap(this._settings.length),this._length=this._settings.length.reduce(((t,e)=>t+e),0),this._regExp=new RegExp(this._settings.regExp),this._render(),this._events(),this._refreshDisabled()}disable(){return e.setAttribute(this._node,"disabled",!0),this._refreshDisabled(),this}dispose(){e.remove(this._container),e.removeAttribute(this._node,"tabindex"),e.removeEvent(this._node,"focus.ui.authcodeinput"),e.removeClass(this._node,this.constructor.classes.hide),this._container=null,this._inputs=null,super.dispose()}enable(){return e.removeAttribute(this._node,"disabled"),this._refreshDisabled(),this}getValue(){return e.getValue(this._node)}}Object.assign(i.prototype,{_events(){e.addEvent(this._node,"focus.ui.authcodeinput",(t=>{const s=this._inputs.find((t=>!e.getValue(t)));e.focus(s||this._inputs[0])})),e.addEventDelegate(this._container,"focusin.ui.authcodeinput","input",(t=>{e.select(t.currentTarget)})),e.addEventDelegate(this._container,"keydown.ui.authcodeinput","input",(t=>{if(1===t.key.length)return void(t.key.match(this._regExp)||t.preventDefault());const s=t.currentTarget;switch(t.code){case"ArrowLeft":const t=e.prevAll(s,"input").pop();e.focus(t);break;case"ArrowRight":const i=e.nextAll(s,"input").shift();e.focus(i);break;case"Backspace":if(e.getValue(s))e.setValue(s,""),this._updateValue();else{const t=e.prevAll(s,"input").pop();e.focus(t)}break;default:return}t.preventDefault()})),e.addEventDelegate(this._container,"keyup.ui.authcodeinput","input",(t=>{const s=t.currentTarget;if(1===t.key.length&&t.key.match(this._regExp)&&e.getValue(s)){this._updateValue();const t=e.nextAll(s,"input").shift();e.focus(t)}}))}}),Object.assign(i.prototype,{_refreshDisabled(){e.is(this._node,":disabled")?e.setAttribute(this._inputs,"disabled",!0):e.removeAttribute(this._inputs,"disabled")},_updateValue(){const t=this._inputs.map((t=>e.getValue(t))).join("");if(t!==this.getValue()&&(e.setValue(this._node,t),e.triggerEvent(this._node,"change.ui.authcodeinput"),this._settings.autoSubmit&&t.length===this._length)){const t=e.closest(this._node,"form").shift();t&&t.requestSubmit()}}}),Object.assign(i.prototype,{_render(){this._container=e.create("div",{class:this.constructor.classes.container}),this._inputs=[];for(const[t,s]of this._settings.length.entries()){if(t>0){const t=e.create("span",{class:this.constructor.classes.divider});e.append(this._container,t)}for(let t=0;t<s;t++){const t=e.create("input",{class:this.constructor.classes.input,attributes:{type:"text",required:!0,maxlength:1,size:1,pattern:this._settings.regExp}});this._inputs.push(t),e.append(this._container,t)}}e.addClass(this._node,this.constructor.classes.hide),e.setAttribute(this._node,"tabindex",-1),e.before(this._node,this._container)}}),i.defaults={length:[3,3],regExp:"[0-9]",autoSubmit:!1},i.classes={container:"d-flex justify-content-between",divider:"vr align-self-center fs-5",hide:"visually-hidden",input:"input-outline fw-bold w-auto px-0 text-center"},s.initComponent("authcodeinput",i),s.AuthCodeInput=i}));